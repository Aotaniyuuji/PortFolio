<div class="container">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <h4 class="mt-5 text-center">レビュー編集ページ</h4>
      <%= form_with model: [@game, @review] do |f| %>
        <div class="form-group offset-md-3">
          <%= f.label :title, "レビュータイトル" %>
          <%= f.text_field :title, placeholder: "タイトル" %>
        </div>
        <div class="form-group offset-md-3">
          <%= f.label :comment, "レビューコメント" %>
          <%= f.text_area :comment, rows: '3',placeholder: "コメント" %><br>
        </div>
        <% if @review.id.nil? %>
          <div class="form-group" id="star">
            <%= f.label :star, "評価" %>
            <%= f.hidden_field :star, id: :review_star, class: 'form-control' %>
            <span id="star-rate"></span>
          </div>
          <script>
            $(document).on('turbolinks:load', function() {
              let elem = document.querySelector('#star-rate<%=  %>');
              if (elem == null) return;

              elem.innerHTML = ""
              let opt = {
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                scoreName: 'review[star]',
              };
              raty(elem, opt);
            });
          </script>
        <% end %>
        <div class="form-group text-center">
          <%= f.submit "更新する", class: 'btn btn-success' %>
        </div>
      <% end %>
    </div>
  </div>
</div>